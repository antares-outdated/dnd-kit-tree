{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n} // This file contains helper functions for DataTable, to keep the component\n// files simpler.\n\n\nexport var set = function set(obj, path, value) {\n  var parts = path;\n  if (Object(obj) !== obj) return obj;\n  if (!Array.isArray(path)) parts = path.toString().match(/[^.[\\]]+/g) || [];\n  parts.slice(0, -1).reduce(function (acc, item, index) {\n    if (Object(acc[item]) === acc[item]) {\n      return acc[item];\n    }\n\n    acc[item] = Math.abs(parts[index + 1]) > 0 === +parts[index + 1] ? [] : {};\n    return acc[item];\n  }, obj)[parts[parts.length - 1]] = value;\n  return obj;\n}; // get the value for the property in the datum object\n\nexport var datumValue = function datumValue(datum, property) {\n  if (!property) return undefined;\n  var parts = property.split('.');\n\n  if (parts.length === 1) {\n    return datum[property];\n  }\n\n  if (!datum[parts[0]]) {\n    return undefined;\n  }\n\n  return datumValue(datum[parts[0]], parts.slice(1).join('.'));\n}; // get the primary property name\n\nexport var normalizePrimaryProperty = function normalizePrimaryProperty(columns, primaryKey) {\n  var result;\n  columns.forEach(function (column) {\n    // remember the first key property\n    if (column.primary && !result) {\n      result = column.property;\n    }\n  });\n\n  if (!result) {\n    if (primaryKey === false) result = undefined;else if (primaryKey) result = primaryKey;else if (columns.length > 0) result = columns[0].property;\n  }\n\n  return result;\n}; // initialize filters with empty strings\n\nexport var initializeFilters = function initializeFilters(columns) {\n  var result = {};\n  columns.forEach(function (column) {\n    if (column.search) {\n      result[column.property] = '';\n    }\n  });\n  return result;\n}; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n\nvar escapeRegExp = function escapeRegExp(input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}; // filter data based on filters then sort\n\n\nexport var filterAndSortData = function filterAndSortData(data, filters, onSearch, sort) {\n  var result = data;\n\n  if (!onSearch) {\n    var regexps = {};\n    Object.keys(filters).filter(function (n) {\n      return filters[n];\n    }).forEach(function (n) {\n      regexps[n] = new RegExp(escapeRegExp(filters[n]), 'i');\n    });\n\n    if (Object.keys(regexps).length > 0) {\n      result = data.filter(function (datum) {\n        return !Object.keys(regexps).some(function (property) {\n          return !regexps[property].test(datumValue(datum, property));\n        });\n      });\n    }\n  }\n\n  if (sort && !sort.external) {\n    var property = sort.property,\n        direction = sort.direction;\n    result = result === data ? [].concat(data) : result; // don't sort caller's data\n\n    var before = direction === 'asc' ? 1 : -1;\n    var after = direction === 'asc' ? -1 : 1;\n    result.sort(function (d1, d2) {\n      if (datumValue(d1, property) > datumValue(d2, property)) return before;\n      if (datumValue(d1, property) < datumValue(d2, property)) return after;\n      return 0;\n    });\n  }\n\n  return result;\n}; // aggregate reducers\n\nvar sumReducer = function sumReducer(accumulated, next) {\n  return accumulated + next;\n};\n\nvar minReducer = function minReducer(accumulated, next) {\n  return accumulated === undefined ? next : Math.min(accumulated, next);\n};\n\nvar maxReducer = function maxReducer(accumulated, next) {\n  return accumulated === undefined ? next : Math.max(accumulated, next);\n};\n\nvar reducers = {\n  max: maxReducer,\n  min: minReducer,\n  sum: sumReducer\n}; // aggregate reducers init values\n\nvar reducersInitValues = {\n  min: Number.MAX_VALUE,\n  max: Number.MIN_VALUE,\n  sum: 0\n}; // aggregate a single column\n\nvar aggregateColumn = function aggregateColumn(column, data) {\n  var value;\n\n  if (column.aggregate === 'avg') {\n    value = data.map(function (d) {\n      return datumValue(d, column.property);\n    }).reduce(sumReducer);\n    value /= data.length;\n  } else {\n    value = data.map(function (d) {\n      return datumValue(d, column.property);\n    }).reduce(reducers[column.aggregate], reducersInitValues[column.aggregate]);\n  }\n\n  return value;\n}; // aggregate all columns that can\n\n\nvar aggregate = function aggregate(columns, data) {\n  var result = {};\n  columns.forEach(function (column) {\n    if (column.aggregate) {\n      var value = aggregateColumn(column, data);\n      result = set(result, column.property, value);\n    }\n  });\n  return result;\n}; // build the values for the footer cells\n\n\nexport var buildFooterValues = function buildFooterValues(columns, data) {\n  var aggregateValues = aggregate(columns, data);\n  var result = {};\n  columns.forEach(function (column) {\n    if (column.footer) {\n      if (typeof column.footer === 'string') {\n        result = set(result, column.property, column.footer);\n      } else if (column.footer.aggregate) {\n        var value = datumValue(aggregateValues, column.property);\n        result = set(result, column.property, value);\n      }\n    }\n  });\n  return result;\n}; // looks at the groupBy property of each data object and returns an\n// array with one item for each unique value of that property.\n\nexport var buildGroups = function buildGroups(columns, data, groupBy) {\n  var result;\n\n  if (groupBy) {\n    result = [];\n    var groupMap = {};\n    data.forEach(function (datum) {\n      var groupByProperty = groupBy.property ? groupBy.property : groupBy;\n      var groupValue = datumValue(datum, groupByProperty);\n\n      if (!groupMap[groupValue]) {\n        var group = {\n          data: [],\n          datum: {},\n          key: groupValue\n        };\n        group.datum[groupByProperty] = groupValue;\n        result.push(group);\n        groupMap[groupValue] = group;\n      }\n\n      groupMap[groupValue].data.push(datum);\n    }); // include any aggregate column values across the data for each group\n\n    columns.forEach(function (column) {\n      if (column.aggregate) {\n        result.forEach(function (group) {\n          var datum = group.datum;\n          datum[column.property] = aggregateColumn(column, group.data);\n        });\n      }\n    });\n  }\n\n  return result;\n}; // build group expanded state, expanding any in groupBy.expand\n\nexport var buildGroupState = function buildGroupState(groups, groupBy) {\n  var result = {};\n\n  if (groups) {\n    groups.forEach(function (_ref) {\n      var key = _ref.key;\n      result[key] = {\n        expanded: false\n      };\n    });\n  }\n\n  if (groupBy && groupBy.expand) {\n    groupBy.expand.forEach(function (value) {\n      result[value] = {\n        expanded: true\n      };\n    });\n  }\n\n  return result;\n};\nexport var normalizeBackgroundColor = function normalizeBackgroundColor(theme) {\n  var background = theme.background; // context background\n\n  if (typeof background === 'string') return background;\n  if (background.light && background.dark) return background;\n  if (background.color) return background.color;\n  return undefined;\n}; // calculate a header or footer cell background based\n// on the table background prop and whether it's pinned.\n// Pin is an array of side strings, empty if not pinned.\n// If pinned, the background comes from the\n// datable.pinned[themeContext].background in the theme\n// where themeContext is either 'header' or 'footer'.\n\nexport var calcPinnedBackground = function calcPinnedBackground(backgroundProp, pin, theme, themeContext) {\n  var background;\n  if (backgroundProp) background = backgroundProp;else if (pin.length > 0 && theme.dataTable.pinned && theme.dataTable.pinned.header) {\n    background = theme.dataTable.pinned[themeContext].background;\n\n    if (!background.color && theme.background) {\n      // theme context has an active background color but the\n      // theme doesn't set an explicit color, repeat the context\n      // background explicitly\n      background = _extends({}, background, {\n        color: normalizeBackgroundColor(theme)\n      });\n    }\n  } else background = undefined;\n  return background;\n};","map":{"version":3,"sources":["C:/Users/antaresofficial/Desktop/tree/node_modules/grommet/es6/components/DataTable/buildState.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","set","obj","path","value","parts","Array","isArray","toString","match","slice","reduce","acc","item","index","Math","abs","datumValue","datum","property","undefined","split","join","normalizePrimaryProperty","columns","primaryKey","result","forEach","column","primary","initializeFilters","search","escapeRegExp","input","replace","filterAndSortData","data","filters","onSearch","sort","regexps","keys","filter","n","RegExp","some","test","external","direction","concat","before","after","d1","d2","sumReducer","accumulated","next","minReducer","min","maxReducer","max","reducers","sum","reducersInitValues","Number","MAX_VALUE","MIN_VALUE","aggregateColumn","aggregate","map","d","buildFooterValues","aggregateValues","footer","buildGroups","groupBy","groupMap","groupByProperty","groupValue","group","push","buildGroupState","groups","_ref","expanded","expand","normalizeBackgroundColor","theme","background","light","dark","color","calcPinnedBackground","backgroundProp","pin","themeContext","dataTable","pinned","header"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n// This file contains helper functions for DataTable, to keep the component\n// files simpler.\nexport var set = function set(obj, path, value) {\n  var parts = path;\n  if (Object(obj) !== obj) return obj;\n  if (!Array.isArray(path)) parts = path.toString().match(/[^.[\\]]+/g) || [];\n  parts.slice(0, -1).reduce(function (acc, item, index) {\n    if (Object(acc[item]) === acc[item]) {\n      return acc[item];\n    }\n\n    acc[item] = Math.abs(parts[index + 1]) > 0 === +parts[index + 1] ? [] : {};\n    return acc[item];\n  }, obj)[parts[parts.length - 1]] = value;\n  return obj;\n}; // get the value for the property in the datum object\n\nexport var datumValue = function datumValue(datum, property) {\n  if (!property) return undefined;\n  var parts = property.split('.');\n\n  if (parts.length === 1) {\n    return datum[property];\n  }\n\n  if (!datum[parts[0]]) {\n    return undefined;\n  }\n\n  return datumValue(datum[parts[0]], parts.slice(1).join('.'));\n}; // get the primary property name\n\nexport var normalizePrimaryProperty = function normalizePrimaryProperty(columns, primaryKey) {\n  var result;\n  columns.forEach(function (column) {\n    // remember the first key property\n    if (column.primary && !result) {\n      result = column.property;\n    }\n  });\n\n  if (!result) {\n    if (primaryKey === false) result = undefined;else if (primaryKey) result = primaryKey;else if (columns.length > 0) result = columns[0].property;\n  }\n\n  return result;\n}; // initialize filters with empty strings\n\nexport var initializeFilters = function initializeFilters(columns) {\n  var result = {};\n  columns.forEach(function (column) {\n    if (column.search) {\n      result[column.property] = '';\n    }\n  });\n  return result;\n}; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n\nvar escapeRegExp = function escapeRegExp(input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}; // filter data based on filters then sort\n\n\nexport var filterAndSortData = function filterAndSortData(data, filters, onSearch, sort) {\n  var result = data;\n\n  if (!onSearch) {\n    var regexps = {};\n    Object.keys(filters).filter(function (n) {\n      return filters[n];\n    }).forEach(function (n) {\n      regexps[n] = new RegExp(escapeRegExp(filters[n]), 'i');\n    });\n\n    if (Object.keys(regexps).length > 0) {\n      result = data.filter(function (datum) {\n        return !Object.keys(regexps).some(function (property) {\n          return !regexps[property].test(datumValue(datum, property));\n        });\n      });\n    }\n  }\n\n  if (sort && !sort.external) {\n    var property = sort.property,\n        direction = sort.direction;\n    result = result === data ? [].concat(data) : result; // don't sort caller's data\n\n    var before = direction === 'asc' ? 1 : -1;\n    var after = direction === 'asc' ? -1 : 1;\n    result.sort(function (d1, d2) {\n      if (datumValue(d1, property) > datumValue(d2, property)) return before;\n      if (datumValue(d1, property) < datumValue(d2, property)) return after;\n      return 0;\n    });\n  }\n\n  return result;\n}; // aggregate reducers\n\nvar sumReducer = function sumReducer(accumulated, next) {\n  return accumulated + next;\n};\n\nvar minReducer = function minReducer(accumulated, next) {\n  return accumulated === undefined ? next : Math.min(accumulated, next);\n};\n\nvar maxReducer = function maxReducer(accumulated, next) {\n  return accumulated === undefined ? next : Math.max(accumulated, next);\n};\n\nvar reducers = {\n  max: maxReducer,\n  min: minReducer,\n  sum: sumReducer\n}; // aggregate reducers init values\n\nvar reducersInitValues = {\n  min: Number.MAX_VALUE,\n  max: Number.MIN_VALUE,\n  sum: 0\n}; // aggregate a single column\n\nvar aggregateColumn = function aggregateColumn(column, data) {\n  var value;\n\n  if (column.aggregate === 'avg') {\n    value = data.map(function (d) {\n      return datumValue(d, column.property);\n    }).reduce(sumReducer);\n    value /= data.length;\n  } else {\n    value = data.map(function (d) {\n      return datumValue(d, column.property);\n    }).reduce(reducers[column.aggregate], reducersInitValues[column.aggregate]);\n  }\n\n  return value;\n}; // aggregate all columns that can\n\n\nvar aggregate = function aggregate(columns, data) {\n  var result = {};\n  columns.forEach(function (column) {\n    if (column.aggregate) {\n      var value = aggregateColumn(column, data);\n      result = set(result, column.property, value);\n    }\n  });\n  return result;\n}; // build the values for the footer cells\n\n\nexport var buildFooterValues = function buildFooterValues(columns, data) {\n  var aggregateValues = aggregate(columns, data);\n  var result = {};\n  columns.forEach(function (column) {\n    if (column.footer) {\n      if (typeof column.footer === 'string') {\n        result = set(result, column.property, column.footer);\n      } else if (column.footer.aggregate) {\n        var value = datumValue(aggregateValues, column.property);\n        result = set(result, column.property, value);\n      }\n    }\n  });\n  return result;\n}; // looks at the groupBy property of each data object and returns an\n// array with one item for each unique value of that property.\n\nexport var buildGroups = function buildGroups(columns, data, groupBy) {\n  var result;\n\n  if (groupBy) {\n    result = [];\n    var groupMap = {};\n    data.forEach(function (datum) {\n      var groupByProperty = groupBy.property ? groupBy.property : groupBy;\n      var groupValue = datumValue(datum, groupByProperty);\n\n      if (!groupMap[groupValue]) {\n        var group = {\n          data: [],\n          datum: {},\n          key: groupValue\n        };\n        group.datum[groupByProperty] = groupValue;\n        result.push(group);\n        groupMap[groupValue] = group;\n      }\n\n      groupMap[groupValue].data.push(datum);\n    }); // include any aggregate column values across the data for each group\n\n    columns.forEach(function (column) {\n      if (column.aggregate) {\n        result.forEach(function (group) {\n          var datum = group.datum;\n          datum[column.property] = aggregateColumn(column, group.data);\n        });\n      }\n    });\n  }\n\n  return result;\n}; // build group expanded state, expanding any in groupBy.expand\n\nexport var buildGroupState = function buildGroupState(groups, groupBy) {\n  var result = {};\n\n  if (groups) {\n    groups.forEach(function (_ref) {\n      var key = _ref.key;\n      result[key] = {\n        expanded: false\n      };\n    });\n  }\n\n  if (groupBy && groupBy.expand) {\n    groupBy.expand.forEach(function (value) {\n      result[value] = {\n        expanded: true\n      };\n    });\n  }\n\n  return result;\n};\nexport var normalizeBackgroundColor = function normalizeBackgroundColor(theme) {\n  var background = theme.background; // context background\n\n  if (typeof background === 'string') return background;\n  if (background.light && background.dark) return background;\n  if (background.color) return background.color;\n  return undefined;\n}; // calculate a header or footer cell background based\n// on the table background prop and whether it's pinned.\n// Pin is an array of side strings, empty if not pinned.\n// If pinned, the background comes from the\n// datable.pinned[themeContext].background in the theme\n// where themeContext is either 'header' or 'footer'.\n\nexport var calcPinnedBackground = function calcPinnedBackground(backgroundProp, pin, theme, themeContext) {\n  var background;\n  if (backgroundProp) background = backgroundProp;else if (pin.length > 0 && theme.dataTable.pinned && theme.dataTable.pinned.header) {\n    background = theme.dataTable.pinned[themeContext].background;\n\n    if (!background.color && theme.background) {\n      // theme context has an active background color but the\n      // theme doesn't set an explicit color, repeat the context\n      // background explicitly\n      background = _extends({}, background, {\n        color: normalizeBackgroundColor(theme)\n      });\n    }\n  } else background = undefined;\n  return background;\n};"]},"metadata":{},"sourceType":"module"}