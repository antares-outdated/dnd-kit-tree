{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useContext, useEffect, useMemo, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { Calendar as CalendarIcon } from 'grommet-icons/icons/Calendar';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Calendar } from '../Calendar';\nimport { Drop } from '../Drop';\nimport { DropButton } from '../DropButton';\nimport { FormContext } from '../Form';\nimport { Keyboard } from '../Keyboard';\nimport { MaskedInput } from '../MaskedInput';\nimport { useForwardedRef } from '../../utils';\nimport { formatToSchema, valueToText, textToValue } from './utils';\nvar DateInput = /*#__PURE__*/forwardRef(function (_ref, refArg) {\n  var buttonProps = _ref.buttonProps,\n      calendarProps = _ref.calendarProps,\n      defaultValue = _ref.defaultValue,\n      disabled = _ref.disabled,\n      dropProps = _ref.dropProps,\n      format = _ref.format,\n      id = _ref.id,\n      _ref$inline = _ref.inline,\n      inline = _ref$inline === void 0 ? false : _ref$inline,\n      inputProps = _ref.inputProps,\n      name = _ref.name,\n      _onChange = _ref.onChange,\n      _onFocus = _ref.onFocus,\n      valueArg = _ref.value,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"buttonProps\", \"calendarProps\", \"defaultValue\", \"disabled\", \"dropProps\", \"format\", \"id\", \"inline\", \"inputProps\", \"name\", \"onChange\", \"onFocus\", \"value\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var iconSize = theme.dateInput.icon && theme.dateInput.icon.size || 'medium';\n\n  var _useContext = useContext(FormContext),\n      useFormInput = _useContext.useFormInput;\n\n  var ref = useForwardedRef(refArg);\n\n  var _useFormInput = useFormInput(name, valueArg, defaultValue),\n      value = _useFormInput[0],\n      setValue = _useFormInput[1]; // parse format and build a formal schema we can use elsewhere\n\n\n  var schema = useMemo(function () {\n    return formatToSchema(format);\n  }, [format]); // mask is only used when a format is provided\n\n  var mask = useMemo(function () {\n    if (!schema) return undefined;\n    return schema.map(function (part) {\n      var _char = part[0].toLowerCase();\n\n      if (_char === 'm' || _char === 'd' || _char === 'y') {\n        return {\n          placeholder: part,\n          length: [1, part.length],\n          regexp: new RegExp(\"^[0-9]{1,\" + part.length + \"}$\")\n        };\n      }\n\n      return {\n        fixed: part\n      };\n    });\n  }, [schema]); // textValue is only used when a format is provided\n\n  var _useState = useState(schema ? valueToText(value, schema) : undefined),\n      textValue = _useState[0],\n      setTextValue = _useState[1]; // We need to distinguish between the caller changing a Form value\n  // and the user typing a date that he isn't finished with yet.\n  // To track this, we keep track of the internalValue from interacting\n  // within this component. If the value has changed outside of this\n  // component, we reset the textValue.\n\n\n  var _useState2 = useState(value),\n      internalValue = _useState2[0],\n      setInternalValue = _useState2[1];\n\n  useEffect(function () {\n    if (schema && !!value !== !!internalValue) {\n      setTextValue(valueToText(value, schema));\n      setInternalValue(value);\n    }\n  }, [internalValue, schema, value]); // when format and not inline, whether to show the Calendar in a Drop\n\n  var _useState3 = useState(),\n      open = _useState3[0],\n      setOpen = _useState3[1];\n\n  var range = Array.isArray(value);\n  var calendar = /*#__PURE__*/React.createElement(Calendar, _extends({\n    ref: inline ? ref : undefined,\n    id: inline && !format ? id : undefined,\n    range: range,\n    date: range ? undefined : value // when caller initializes with empty array, dates should be undefined\n    // allowing the user to select both begin and end of the range\n    ,\n    dates: range && value.length ? [value] : undefined,\n    onSelect: disabled ? undefined : function (nextValue) {\n      var normalizedValue;\n\n      if (range && Array.isArray(nextValue)) {\n        normalizedValue = nextValue[0];\n      } // clicking an edge date removes it\n      else if (range) normalizedValue = [nextValue, nextValue];else normalizedValue = nextValue;\n\n      if (schema) setTextValue(valueToText(normalizedValue, schema));\n      setValue(normalizedValue);\n      setInternalValue(normalizedValue);\n      if (_onChange) _onChange({\n        value: normalizedValue\n      });\n      if (open && !range) setOpen(false);\n    }\n  }, calendarProps));\n\n  if (!format) {\n    // When no format is specified, we don't give the user a way to type\n    if (inline) return calendar;\n    return /*#__PURE__*/React.createElement(DropButton, _extends({\n      ref: ref,\n      id: id,\n      dropProps: _extends({\n        align: {\n          top: 'bottom',\n          left: 'left'\n        }\n      }, dropProps),\n      dropContent: calendar,\n      icon: /*#__PURE__*/React.createElement(CalendarIcon, {\n        size: iconSize\n      })\n    }, buttonProps));\n  }\n\n  var input = /*#__PURE__*/React.createElement(FormContext.Provider, {\n    key: \"input\" // don't let MaskedInput drive the Form\n    ,\n    value: {\n      useFormInput: function useFormInput(_, val) {\n        return [val, function () {}];\n      }\n    }\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEsc: open ? function () {\n      return setOpen(false);\n    } : undefined\n  }, /*#__PURE__*/React.createElement(MaskedInput, _extends({\n    ref: ref,\n    id: id,\n    name: name,\n    icon: /*#__PURE__*/React.createElement(CalendarIcon, {\n      size: iconSize\n    }),\n    reverse: true,\n    disabled: disabled,\n    mask: mask\n  }, inputProps, rest, {\n    value: textValue,\n    onChange: function onChange(event) {\n      var nextTextValue = event.target.value;\n      setTextValue(nextTextValue);\n      var nextValue = textToValue(nextTextValue, schema); // update value even when undefined\n\n      setValue(nextValue);\n      setInternalValue(nextValue || '');\n\n      if (_onChange) {\n        event.persist(); // extract from React synthetic event pool\n\n        var adjustedEvent = event;\n        adjustedEvent.value = nextValue;\n\n        _onChange(adjustedEvent);\n      }\n    },\n    onFocus: function onFocus(event) {\n      setOpen(true);\n      if (_onFocus) _onFocus(event);\n    }\n  }))));\n\n  if (inline) {\n    return /*#__PURE__*/React.createElement(Box, null, input, calendar);\n  }\n\n  if (open) {\n    return [input, /*#__PURE__*/React.createElement(Drop, _extends({\n      overflow: \"visible\",\n      key: \"drop\",\n      id: id ? id + \"__drop\" : undefined,\n      target: ref.current,\n      align: _extends({\n        top: 'bottom',\n        left: 'left'\n      }, dropProps),\n      onEsc: function onEsc() {\n        return setOpen(false);\n      },\n      onClickOutside: function onClickOutside() {\n        return setOpen(false);\n      }\n    }, dropProps), calendar)];\n  }\n\n  return input;\n});\nDateInput.displayName = 'DateInput';\nvar DateInputDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  DateInputDoc = require('./doc').doc(DateInput);\n}\n\nvar DateInputWrapper = DateInputDoc || DateInput;\nexport { DateInputWrapper as DateInput };","map":{"version":3,"sources":["C:/Users/antaresofficial/Desktop/tree/node_modules/grommet/es6/components/DateInput/DateInput.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useContext","useEffect","useMemo","useState","ThemeContext","Calendar","CalendarIcon","defaultProps","Box","Drop","DropButton","FormContext","Keyboard","MaskedInput","useForwardedRef","formatToSchema","valueToText","textToValue","DateInput","_ref","refArg","buttonProps","calendarProps","defaultValue","disabled","dropProps","format","id","_ref$inline","inline","inputProps","name","_onChange","onChange","_onFocus","onFocus","valueArg","value","rest","theme","iconSize","dateInput","icon","size","_useContext","useFormInput","ref","_useFormInput","setValue","schema","mask","undefined","map","part","_char","toLowerCase","placeholder","regexp","RegExp","fixed","_useState","textValue","setTextValue","_useState2","internalValue","setInternalValue","_useState3","open","setOpen","range","Array","isArray","calendar","createElement","date","dates","onSelect","nextValue","normalizedValue","align","top","left","dropContent","input","Provider","_","val","onEsc","reverse","event","nextTextValue","persist","adjustedEvent","overflow","current","onClickOutside","displayName","DateInputDoc","process","env","NODE_ENV","require","doc","DateInputWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useContext, useEffect, useMemo, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { Calendar as CalendarIcon } from 'grommet-icons/icons/Calendar';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Calendar } from '../Calendar';\nimport { Drop } from '../Drop';\nimport { DropButton } from '../DropButton';\nimport { FormContext } from '../Form';\nimport { Keyboard } from '../Keyboard';\nimport { MaskedInput } from '../MaskedInput';\nimport { useForwardedRef } from '../../utils';\nimport { formatToSchema, valueToText, textToValue } from './utils';\nvar DateInput = /*#__PURE__*/forwardRef(function (_ref, refArg) {\n  var buttonProps = _ref.buttonProps,\n      calendarProps = _ref.calendarProps,\n      defaultValue = _ref.defaultValue,\n      disabled = _ref.disabled,\n      dropProps = _ref.dropProps,\n      format = _ref.format,\n      id = _ref.id,\n      _ref$inline = _ref.inline,\n      inline = _ref$inline === void 0 ? false : _ref$inline,\n      inputProps = _ref.inputProps,\n      name = _ref.name,\n      _onChange = _ref.onChange,\n      _onFocus = _ref.onFocus,\n      valueArg = _ref.value,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"buttonProps\", \"calendarProps\", \"defaultValue\", \"disabled\", \"dropProps\", \"format\", \"id\", \"inline\", \"inputProps\", \"name\", \"onChange\", \"onFocus\", \"value\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var iconSize = theme.dateInput.icon && theme.dateInput.icon.size || 'medium';\n\n  var _useContext = useContext(FormContext),\n      useFormInput = _useContext.useFormInput;\n\n  var ref = useForwardedRef(refArg);\n\n  var _useFormInput = useFormInput(name, valueArg, defaultValue),\n      value = _useFormInput[0],\n      setValue = _useFormInput[1]; // parse format and build a formal schema we can use elsewhere\n\n\n  var schema = useMemo(function () {\n    return formatToSchema(format);\n  }, [format]); // mask is only used when a format is provided\n\n  var mask = useMemo(function () {\n    if (!schema) return undefined;\n    return schema.map(function (part) {\n      var _char = part[0].toLowerCase();\n\n      if (_char === 'm' || _char === 'd' || _char === 'y') {\n        return {\n          placeholder: part,\n          length: [1, part.length],\n          regexp: new RegExp(\"^[0-9]{1,\" + part.length + \"}$\")\n        };\n      }\n\n      return {\n        fixed: part\n      };\n    });\n  }, [schema]); // textValue is only used when a format is provided\n\n  var _useState = useState(schema ? valueToText(value, schema) : undefined),\n      textValue = _useState[0],\n      setTextValue = _useState[1]; // We need to distinguish between the caller changing a Form value\n  // and the user typing a date that he isn't finished with yet.\n  // To track this, we keep track of the internalValue from interacting\n  // within this component. If the value has changed outside of this\n  // component, we reset the textValue.\n\n\n  var _useState2 = useState(value),\n      internalValue = _useState2[0],\n      setInternalValue = _useState2[1];\n\n  useEffect(function () {\n    if (schema && !!value !== !!internalValue) {\n      setTextValue(valueToText(value, schema));\n      setInternalValue(value);\n    }\n  }, [internalValue, schema, value]); // when format and not inline, whether to show the Calendar in a Drop\n\n  var _useState3 = useState(),\n      open = _useState3[0],\n      setOpen = _useState3[1];\n\n  var range = Array.isArray(value);\n  var calendar = /*#__PURE__*/React.createElement(Calendar, _extends({\n    ref: inline ? ref : undefined,\n    id: inline && !format ? id : undefined,\n    range: range,\n    date: range ? undefined : value // when caller initializes with empty array, dates should be undefined\n    // allowing the user to select both begin and end of the range\n    ,\n    dates: range && value.length ? [value] : undefined,\n    onSelect: disabled ? undefined : function (nextValue) {\n      var normalizedValue;\n\n      if (range && Array.isArray(nextValue)) {\n        normalizedValue = nextValue[0];\n      } // clicking an edge date removes it\n      else if (range) normalizedValue = [nextValue, nextValue];else normalizedValue = nextValue;\n\n      if (schema) setTextValue(valueToText(normalizedValue, schema));\n      setValue(normalizedValue);\n      setInternalValue(normalizedValue);\n      if (_onChange) _onChange({\n        value: normalizedValue\n      });\n      if (open && !range) setOpen(false);\n    }\n  }, calendarProps));\n\n  if (!format) {\n    // When no format is specified, we don't give the user a way to type\n    if (inline) return calendar;\n    return /*#__PURE__*/React.createElement(DropButton, _extends({\n      ref: ref,\n      id: id,\n      dropProps: _extends({\n        align: {\n          top: 'bottom',\n          left: 'left'\n        }\n      }, dropProps),\n      dropContent: calendar,\n      icon: /*#__PURE__*/React.createElement(CalendarIcon, {\n        size: iconSize\n      })\n    }, buttonProps));\n  }\n\n  var input = /*#__PURE__*/React.createElement(FormContext.Provider, {\n    key: \"input\" // don't let MaskedInput drive the Form\n    ,\n    value: {\n      useFormInput: function useFormInput(_, val) {\n        return [val, function () {}];\n      }\n    }\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEsc: open ? function () {\n      return setOpen(false);\n    } : undefined\n  }, /*#__PURE__*/React.createElement(MaskedInput, _extends({\n    ref: ref,\n    id: id,\n    name: name,\n    icon: /*#__PURE__*/React.createElement(CalendarIcon, {\n      size: iconSize\n    }),\n    reverse: true,\n    disabled: disabled,\n    mask: mask\n  }, inputProps, rest, {\n    value: textValue,\n    onChange: function onChange(event) {\n      var nextTextValue = event.target.value;\n      setTextValue(nextTextValue);\n      var nextValue = textToValue(nextTextValue, schema); // update value even when undefined\n\n      setValue(nextValue);\n      setInternalValue(nextValue || '');\n\n      if (_onChange) {\n        event.persist(); // extract from React synthetic event pool\n\n        var adjustedEvent = event;\n        adjustedEvent.value = nextValue;\n\n        _onChange(adjustedEvent);\n      }\n    },\n    onFocus: function onFocus(event) {\n      setOpen(true);\n      if (_onFocus) _onFocus(event);\n    }\n  }))));\n\n  if (inline) {\n    return /*#__PURE__*/React.createElement(Box, null, input, calendar);\n  }\n\n  if (open) {\n    return [input, /*#__PURE__*/React.createElement(Drop, _extends({\n      overflow: \"visible\",\n      key: \"drop\",\n      id: id ? id + \"__drop\" : undefined,\n      target: ref.current,\n      align: _extends({\n        top: 'bottom',\n        left: 'left'\n      }, dropProps),\n      onEsc: function onEsc() {\n        return setOpen(false);\n      },\n      onClickOutside: function onClickOutside() {\n        return setOpen(false);\n      }\n    }, dropProps), calendar)];\n  }\n\n  return input;\n});\nDateInput.displayName = 'DateInput';\nvar DateInputDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  DateInputDoc = require('./doc').doc(DateInput);\n}\n\nvar DateInputWrapper = DateInputDoc || DateInput;\nexport { DateInputWrapper as DateInput };"]},"metadata":{},"sourceType":"module"}