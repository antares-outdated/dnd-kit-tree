{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nvar contexts = ['header', 'body', 'footer'];\n\nvar normalizeProp = function normalizeProp(prop, context) {\n  if (prop) {\n    if (prop[context]) {\n      return prop[context];\n    } // if prop[context] wasn't defined, but other values\n    // exist on the prop, return undefined so that background\n    // for context will defaultto theme values instead\n    // note: need to include `pinned` since it is not a\n    // defined context\n\n\n    if (contexts.some(function (c) {\n      return prop[c] || prop.pinned;\n    })) {\n      return undefined;\n    }\n\n    return prop;\n  }\n\n  return undefined;\n};\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      fill = _ref.fill,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSelect = _ref.onSelect,\n      onSortProp = _ref.onSort,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      paginate = _ref.paginate,\n      pin = _ref.pin,\n      placeholder = _ref.placeholder,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      select = _ref.select,\n      showProp = _ref.show,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      rowDetails = _ref.rowDetails,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"background\", \"border\", \"columns\", \"data\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // property name of the primary property\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState = useState(),\n      filtering = _useState[0],\n      setFiltering = _useState[1]; // the currently active filters\n\n\n  var _useState2 = useState(initializeFilters(columns)),\n      filters = _useState2[0],\n      setFilters = _useState2[1]; // which column we are sorting on, with direction\n\n\n  var _useState3 = useState(sortProp || {}),\n      sort = _useState3[0],\n      setSort = _useState3[1]; // the data filtered and sorted, if needed\n\n\n  var adjustedData = useMemo(function () {\n    return filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy);\n  }, [adjustedData, columns, groupBy]); // an object indicating which group values are expanded\n\n  var _useState4 = useState(buildGroupState(groups, groupBy)),\n      groupState = _useState4[0],\n      setGroupState = _useState4[1];\n\n  var _useState5 = useState(select || onSelect && [] || undefined),\n      selected = _useState5[0],\n      setSelected = _useState5[1];\n\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n\n  var _useState6 = useState([]),\n      rowExpand = _useState6[0],\n      setRowExpand = _useState6[1]; // any customized column widths\n\n\n  var _useState7 = useState({}),\n      widths = _useState7[0],\n      setWidths = _useState7[1]; // placeholder placement stuff\n\n\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n\n  var _useState8 = useState(),\n      headerHeight = _useState8[0],\n      setHeaderHeight = _useState8[1];\n\n  var _useState9 = useState(),\n      footerHeight = _useState9[0],\n      setFooterHeight = _useState9[1]; // offset compensation when body overflows\n\n\n  var _useState10 = useState(0),\n      scrollOffset = _useState10[0],\n      setScrollOffset = _useState10[1]; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n\n    var nextScrollOffset = ((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]); // remember that we are filtering on this property\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n\n      if (groupBy.onExpand) {\n        var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n          return nextGroupState[k].expanded;\n        });\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n\n    if (groupBy.onExpand) {\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  var _usePagination = usePagination(_extends({\n    data: adjustedData,\n    page: normalizeShow(showProp, step),\n    step: step\n  }, paginate)),\n      items = _usePagination[0],\n      paginationProps = _usePagination[1];\n\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined; // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    },\n    flex: false\n  } : undefined; // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    background: normalizeProp(background, 'header'),\n    border: normalizeProp(border, 'header'),\n    columns: columns,\n    data: adjustedData,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'header'),\n    pin: pin === true || pin === 'header',\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails\n  }), groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    groupBy: groupBy.property ? groupBy.property : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'body'),\n    primaryProperty: primaryProperty,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onToggle: onToggleGroup,\n    selected: selected,\n    size: size\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    onMore: onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    pad: normalizeProp(pad, 'body'),\n    pinnedBackground: normalizeProp(background, 'pinned'),\n    placeholder: placeholder,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: step,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand\n  }), showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    background: normalizeProp(background, 'footer'),\n    border: normalizeProp(border, 'footer'),\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pad: normalizeProp(pad, 'footer'),\n    pin: pin === true || pin === 'footer',\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size\n  }), placeholder && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, typeof placeholder === 'string' ? /*#__PURE__*/React.createElement(Box, {\n    background: {\n      color: 'background-front',\n      opacity: 'strong'\n    },\n    align: \"center\",\n    justify: \"center\",\n    fill: \"vertical\"\n  }, /*#__PURE__*/React.createElement(Text, null, placeholder)) : placeholder))), paginate && data.length > step && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\n\nvar DataTableDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  DataTableDoc = require('./doc').doc(DataTable);\n}\n\nvar DataTableWrapper = DataTableDoc || DataTable;\nexport { DataTableWrapper as DataTable };","map":{"version":3,"sources":["C:/Users/antaresofficial/Desktop/tree/node_modules/grommet/es6/components/DataTable/DataTable.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Fragment","ThemeContext","useLayoutEffect","Box","Text","Header","Footer","Body","GroupedBody","Pagination","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizePrimaryProperty","normalizeShow","usePagination","StyledContainer","StyledDataTable","StyledPlaceholder","contexts","normalizeProp","prop","context","some","c","pinned","undefined","DataTable","_ref","background","border","_ref$columns","columns","_ref$data","data","fill","groupBy","onClickRow","onMore","onSearch","onSelect","onSortProp","onSort","replace","pad","paginate","pin","placeholder","primaryKey","resizeable","rowProps","select","showProp","show","size","sortProp","sort","sortable","rowDetails","_ref$step","step","rest","theme","defaultProps","primaryProperty","showFooter","filter","footer","_useState","filtering","setFiltering","_useState2","filters","setFilters","_useState3","setSort","adjustedData","footerValues","groups","_useState4","groupState","setGroupState","_useState5","selected","setSelected","_useState6","rowExpand","setRowExpand","_useState7","widths","setWidths","headerRef","bodyRef","footerRef","_useState8","headerHeight","setHeaderHeight","_useState9","footerHeight","setFooterHeight","_useState10","scrollOffset","setScrollOffset","_bodyRef$current$pare","nextScrollOffset","current","parentElement","clientWidth","nextHeaderHeight","getBoundingClientRect","height","nextFooterHeight","onFiltering","property","onFilter","value","nextFilters","external","direction","nextSort","onToggleGroup","groupValue","nextGroupState","expanded","onExpand","expandedKeys","k","onToggleGroups","forEach","onResize","width","nextWidths","console","warn","_usePagination","page","items","paginationProps","Container","containterProps","dataTable","container","OverflowContainer","overflowContainerProps","overflow","horizontal","flex","paginatedDataTableProps","style","minWidth","createElement","fillProp","ref","nextSelected","onToggle","pinnedBackground","top","bottom","color","opacity","align","justify","alignSelf","DataTableDoc","process","env","NODE_ENV","require","doc","DataTableWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nvar contexts = ['header', 'body', 'footer'];\n\nvar normalizeProp = function normalizeProp(prop, context) {\n  if (prop) {\n    if (prop[context]) {\n      return prop[context];\n    } // if prop[context] wasn't defined, but other values\n    // exist on the prop, return undefined so that background\n    // for context will defaultto theme values instead\n    // note: need to include `pinned` since it is not a\n    // defined context\n\n\n    if (contexts.some(function (c) {\n      return prop[c] || prop.pinned;\n    })) {\n      return undefined;\n    }\n\n    return prop;\n  }\n\n  return undefined;\n};\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      fill = _ref.fill,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSelect = _ref.onSelect,\n      onSortProp = _ref.onSort,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      paginate = _ref.paginate,\n      pin = _ref.pin,\n      placeholder = _ref.placeholder,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      select = _ref.select,\n      showProp = _ref.show,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      rowDetails = _ref.rowDetails,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"background\", \"border\", \"columns\", \"data\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // property name of the primary property\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState = useState(),\n      filtering = _useState[0],\n      setFiltering = _useState[1]; // the currently active filters\n\n\n  var _useState2 = useState(initializeFilters(columns)),\n      filters = _useState2[0],\n      setFilters = _useState2[1]; // which column we are sorting on, with direction\n\n\n  var _useState3 = useState(sortProp || {}),\n      sort = _useState3[0],\n      setSort = _useState3[1]; // the data filtered and sorted, if needed\n\n\n  var adjustedData = useMemo(function () {\n    return filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy);\n  }, [adjustedData, columns, groupBy]); // an object indicating which group values are expanded\n\n  var _useState4 = useState(buildGroupState(groups, groupBy)),\n      groupState = _useState4[0],\n      setGroupState = _useState4[1];\n\n  var _useState5 = useState(select || onSelect && [] || undefined),\n      selected = _useState5[0],\n      setSelected = _useState5[1];\n\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n\n  var _useState6 = useState([]),\n      rowExpand = _useState6[0],\n      setRowExpand = _useState6[1]; // any customized column widths\n\n\n  var _useState7 = useState({}),\n      widths = _useState7[0],\n      setWidths = _useState7[1]; // placeholder placement stuff\n\n\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n\n  var _useState8 = useState(),\n      headerHeight = _useState8[0],\n      setHeaderHeight = _useState8[1];\n\n  var _useState9 = useState(),\n      footerHeight = _useState9[0],\n      setFooterHeight = _useState9[1]; // offset compensation when body overflows\n\n\n  var _useState10 = useState(0),\n      scrollOffset = _useState10[0],\n      setScrollOffset = _useState10[1]; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n\n    var nextScrollOffset = ((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]); // remember that we are filtering on this property\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n\n      if (groupBy.onExpand) {\n        var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n          return nextGroupState[k].expanded;\n        });\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n\n    if (groupBy.onExpand) {\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  var _usePagination = usePagination(_extends({\n    data: adjustedData,\n    page: normalizeShow(showProp, step),\n    step: step\n  }, paginate)),\n      items = _usePagination[0],\n      paginationProps = _usePagination[1];\n\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined; // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    },\n    flex: false\n  } : undefined; // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    background: normalizeProp(background, 'header'),\n    border: normalizeProp(border, 'header'),\n    columns: columns,\n    data: adjustedData,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'header'),\n    pin: pin === true || pin === 'header',\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails\n  }), groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    groupBy: groupBy.property ? groupBy.property : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'body'),\n    primaryProperty: primaryProperty,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onToggle: onToggleGroup,\n    selected: selected,\n    size: size\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    onMore: onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    pad: normalizeProp(pad, 'body'),\n    pinnedBackground: normalizeProp(background, 'pinned'),\n    placeholder: placeholder,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: step,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand\n  }), showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    background: normalizeProp(background, 'footer'),\n    border: normalizeProp(border, 'footer'),\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pad: normalizeProp(pad, 'footer'),\n    pin: pin === true || pin === 'footer',\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size\n  }), placeholder && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, typeof placeholder === 'string' ? /*#__PURE__*/React.createElement(Box, {\n    background: {\n      color: 'background-front',\n      opacity: 'strong'\n    },\n    align: \"center\",\n    justify: \"center\",\n    fill: \"vertical\"\n  }, /*#__PURE__*/React.createElement(Text, null, placeholder)) : placeholder))), paginate && data.length > step && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\n\nvar DataTableDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  DataTableDoc = require('./doc').doc(DataTable);\n}\n\nvar DataTableWrapper = DataTableDoc || DataTable;\nexport { DataTableWrapper as DataTable };"]},"metadata":{},"sourceType":"module"}