{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useContext, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n      animation = props.animation,\n      targetChildPosition = props.targetChildPosition;\n\n  var _useState = useState(),\n      originalFocusedElement = _useState[0],\n      setOriginalFocusedElement = _useState[1];\n\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n\n  var _useState2 = useState(),\n      layerContainer = _useState2[0],\n      setLayerContainer = _useState2[1];\n\n  var containerTarget = useContext(ContainerTargetContext);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]); // just a few things to clean up when the Layer is unmounted\n\n  useLayoutEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = document.getElementById('layerClone');\n\n            if (clone) {\n              containerTarget.removeChild(clone);\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, originalFocusedElement]);\n  return layerContainer ? /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nvar LayerDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  LayerDoc = require('./doc').doc(Layer); // eslint-disable-line global-require\n}\n\nvar LayerWrapper = LayerDoc || Layer;\nexport { LayerWrapper as Layer };","map":{"version":3,"sources":["C:/Users/antaresofficial/Desktop/tree/node_modules/grommet/es6/components/Layer/Layer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useContext","useEffect","useState","createPortal","useLayoutEffect","getNewContainer","LayerContainer","animationDuration","ContainerTargetContext","Layer","props","ref","animate","animation","targetChildPosition","_useState","originalFocusedElement","setOriginalFocusedElement","document","activeElement","_useState2","layerContainer","setLayerContainer","containerTarget","focus","setTimeout","parentNode","activeAnimation","undefined","layerClone","cloneNode","id","appendChild","clonedContainer","querySelector","style","animationDirection","clone","getElementById","removeChild","remove","createElement","displayName","LayerDoc","process","env","NODE_ENV","require","doc","LayerWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useContext, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n      animation = props.animation,\n      targetChildPosition = props.targetChildPosition;\n\n  var _useState = useState(),\n      originalFocusedElement = _useState[0],\n      setOriginalFocusedElement = _useState[1];\n\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n\n  var _useState2 = useState(),\n      layerContainer = _useState2[0],\n      setLayerContainer = _useState2[1];\n\n  var containerTarget = useContext(ContainerTargetContext);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]); // just a few things to clean up when the Layer is unmounted\n\n  useLayoutEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = document.getElementById('layerClone');\n\n            if (clone) {\n              containerTarget.removeChild(clone);\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, originalFocusedElement]);\n  return layerContainer ? /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nvar LayerDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  LayerDoc = require('./doc').doc(Layer); // eslint-disable-line global-require\n}\n\nvar LayerWrapper = LayerDoc || Layer;\nexport { LayerWrapper as Layer };"]},"metadata":{},"sourceType":"module"}